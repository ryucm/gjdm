<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="egovframework.gjdm.mapper.DimCodeMapper">

	<select id="selectDimCodeList" resultType="dimCodeVO">
		select * from dwdm.dim_code where 1=1
			<if test="codeId != null and codeId != ''">
				and code_id=cast(#{codeId} as integer)
			</if>
			<if test="groupCode != null and groupCode != ''">
				and (group_code like CONCAT('%', #{groupCode}, '%') or group_name like CONCAT('%', #{groupCode}, '%'))
			</if>
			<if test="code != null and code != ''">
				and (code like CONCAT('%', #{code}, '%') or code_value like CONCAT('%', #{code}, '%'))
			</if>
	</select>

	<delete id="deleteDimCode">
		delete from dwdm.dim_code where code_id=#{codeId}
	</delete>
	
	<update id="updateDimCode">
		update dwdm.dim_code set group_code=#{groupCode}, group_name=#{groupName}, code=#{code}, code_value=#{codeValue}, display_name=#{displayName}, use_yn=#{useYN}, updt_dt=now(), updt_id = 'change'
		where code_id=cast(#{codeId} as integer)
	</update>
</mapper>